<template>
  <base-page
    :title="title"
    @page:beforeremove="onPageBeforeRemove"
    @page:beforeout="onPageBeforeOut"
  >
    <f7-block strong>
      Sheet Modal分两种打开方式，有组件方式，也有API指令创建方式
      <p class="margin-top">
        更多用法参考：<f7-link
          href="https://framework7.io/vue/sheet-modal.html"
          text="https://framework7.io/vue/sheet-modal.html"
          external
        ></f7-link>
      </p>
    </f7-block>
    <f7-block>
      <p>
        <f7-button large fill sheet-open=".demo-sheet">组件创建</f7-button>
      </p>
      <p>
        <f7-button large fill @click="createSheet">API创建</f7-button>
      </p>
      <p>
        <f7-button large fill @click="sheetOpened = true"
          >Open Via Prop Change</f7-button
        >
      </p>
      <p>
        <f7-button large fill sheet-open=".demo-sheet-swipe-to-close"
          >Swipe To Close</f7-button
        >
      </p>
      <p>
        <f7-button large fill sheet-open=".demo-sheet-swipe-to-step"
          >Swipe To Step</f7-button
        >
      </p>
      <p>
        <f7-button large fill sheet-open=".demo-sheet-push">
          Sheet Push
        </f7-button>
      </p>
    </f7-block>

    <f7-sheet
      class="demo-sheet"
      :opened="sheetOpened"
      @sheet:closed="sheetOpened = false"
    >
      <f7-toolbar no-hairline>
        <div class="left"></div>
        <div class="right">
          <f7-link sheet-close>关闭</f7-link>
        </div>
      </f7-toolbar>
      <!-- Scrollable sheet content -->
      <f7-page-content>
        <f7-block>
          <p>
            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quae
            ducimus dolorum ipsa aliquid accusamus perferendis laboriosam
            delectus numquam minima animi, libero illo in tempora harum sequi
            corporis alias ex adipisci.
          </p>
          <p>
            Sunt magni enim saepe quasi aspernatur delectus consectetur fugiat
            necessitatibus qui sed, similique quis facere tempora, laudantium
            quae expedita ea, aperiam dolores. Aut deserunt soluta alias magnam.
            Consequatur, nisi, enim.
          </p>
          <p>
            Eaque maiores ducimus, impedit unde culpa qui, explicabo accusamus,
            non vero corporis voluptatibus similique odit ab. Quaerat quasi
            consectetur quidem libero? Repudiandae adipisci vel voluptatum,
            autem libero minus dignissimos repellat.
          </p>
          <p>
            Iusto, est corrupti! Totam minus voluptas natus esse possimus nobis,
            delectus veniam expedita sapiente ut cum reprehenderit aliquid odio
            amet praesentium vero temporibus obcaecati beatae aspernatur
            incidunt, perferendis voluptates doloribus?
          </p>
          <p>
            Illum id laborum tempore, doloribus culpa labore ex iusto odit.
            Quibusdam consequuntur totam nam obcaecati, enim cumque nobis,
            accusamus, quos voluptates, voluptatibus sapiente repellendus
            nesciunt praesentium velit ipsa illo iusto.
          </p>
        </f7-block>
      </f7-page-content>
    </f7-sheet>

    <f7-sheet
      class="demo-sheet-swipe-to-close"
      style="height: auto; --f7-sheet-bg-color: #fff"
      swipe-to-close
      backdrop
    >
      <f7-page-content>
        <f7-block-title large>Hello!</f7-block-title>
        <f7-block>
          <p>
            Eaque maiores ducimus, impedit unde culpa qui, explicabo accusamus,
            non vero corporis voluptatibus similique odit ab. Quaerat quasi
            consectetur quidem libero? Repudiandae adipisci vel voluptatum,
            autem libero minus dignissimos repellat.
          </p>
          <p>
            Iusto, est corrupti! Totam minus voluptas natus esse possimus nobis,
            delectus veniam expedita sapiente ut cum reprehenderit aliquid odio
            amet praesentium vero temporibus obcaecati beatae aspernatur
            incidunt, perferendis voluptates doloribus?
          </p>
        </f7-block>
      </f7-page-content>
    </f7-sheet>

    <f7-sheet
      class="demo-sheet-swipe-to-step"
      style="height: auto; --f7-sheet-bg-color: #fff"
      swipe-to-close
      swipe-to-step
      backdrop
    >
      <div class="sheet-modal-swipe-step">
        <div
          class="
            display-flex
            padding
            justify-content-space-between
            align-items-center
          "
        >
          <div style="font-size: 18px"><b>Total:</b></div>
          <div style="font-size: 22px"><b>$500</b></div>
        </div>
        <div class="padding-horizontal padding-bottom">
          <f7-button large fill>Make Payment</f7-button>
          <div class="margin-top text-align-center">
            Swipe up for more details
          </div>
        </div>
      </div>
      <f7-block-title medium class="margin-top">Your order:</f7-block-title>
      <f7-list no-hairlines>
        <f7-list-item title="Item 1">
          <template #after>
            <b class="text-color-black">$200</b>
          </template>
        </f7-list-item>
        <f7-list-item title="Item 2">
          <template #after>
            <b class="text-color-black">$180</b>
          </template>
        </f7-list-item>
        <f7-list-item title="Delivery">
          <template #after>
            <b class="text-color-black">$120</b>
          </template>
        </f7-list-item>
      </f7-list>
    </f7-sheet>

    <f7-sheet class="demo-sheet-push" push>
      <f7-toolbar>
        <div class="left"></div>
        <div class="right">
          <f7-link sheet-close>关闭</f7-link>
        </div>
      </f7-toolbar>
      <f7-page-content>
        <f7-block>
          <p>
            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quae
            ducimus dolorum ipsa aliquid accusamus perferendis laboriosam
            delectus numquam minima animi, libero illo in tempora harum sequi
            corporis alias ex adipisci.
          </p>
          <p>
            Sunt magni enim saepe quasi aspernatur delectus consectetur fugiat
            necessitatibus qui sed, similique quis facere tempora, laudantium
            quae expedita ea, aperiam dolores. Aut deserunt soluta alias magnam.
            Consequatur, nisi, enim.
          </p>
          <p>
            Eaque maiores ducimus, impedit unde culpa qui, explicabo accusamus,
            non vero corporis voluptatibus similique odit ab. Quaerat quasi
            consectetur quidem libero? Repudiandae adipisci vel voluptatum,
            autem libero minus dignissimos repellat.
          </p>
          <p>
            Iusto, est corrupti! Totam minus voluptas natus esse possimus nobis,
            delectus veniam expedita sapiente ut cum reprehenderit aliquid odio
            amet praesentium vero temporibus obcaecati beatae aspernatur
            incidunt, perferendis voluptates doloribus?
          </p>
          <p>
            Illum id laborum tempore, doloribus culpa labore ex iusto odit.
            Quibusdam consequuntur totam nam obcaecati, enim cumque nobis,
            accusamus, quos voluptates, voluptatibus sapiente repellendus
            nesciunt praesentium velit ipsa illo iusto.
          </p>
        </f7-block>
      </f7-page-content>
    </f7-sheet>
  </base-page>
</template>

<script lang="ts">
import { f7 } from "framework7-vue";
import { defineComponent, ref } from "vue";

export default defineComponent({
  props: {
    title: String,
  },
  setup() {
    const sheetOpened = ref(false);

    const sheet = ref();
    const createSheet = function () {
      // Create sheet modal
      if (!sheet.value) {
        sheet.value = f7.sheet.create({
          content: `
              <div class="sheet-modal">
                <div class="toolbar">
                  <div class="toolbar-inner justify-content-flex-end">
                    <a href="#" class="link sheet-close">关闭</a>
                  </div>
                </div>
                <div class="sheet-modal-inner">
                  <div class="page-content">
                    <div class="block">
                      <p>This sheet modal was created dynamically</p>
                      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse faucibus mauris leo, eu bibendum neque congue non. Ut leo mauris, eleifend eu commodo a, egestas ac urna. Maecenas in lacus faucibus, viverra ipsum pulvinar, molestie arcu. Etiam lacinia venenatis dignissim. Suspendisse non nisl semper tellus malesuada suscipit eu et eros. Nulla eu enim quis quam elementum vulputate. Mauris ornare consequat nunc viverra pellentesque. Aenean semper eu massa sit amet aliquam. Integer et neque sed libero mollis elementum at vitae ligula. Vestibulum pharetra sed libero sed porttitor. Suspendisse a faucibus lectus.</p>
                    </div>
                  </div>
                </div>
              </div>
            `.trim(),
        });
      }
      // Close inline sheet
      if (f7.$(".demo-sheet.modal-in").length > 0)
        f7.sheet.close(".demo-sheet");
      // Open it
      sheet.value.open();
    };
    const onPageBeforeOut = () => {
      f7.sheet.close();
    };
    const onPageBeforeRemove = () => {
      if (sheet.value) sheet.value.destroy();
    };
    return {
      createSheet,
      sheetOpened,
      onPageBeforeOut,
      onPageBeforeRemove,
    };
  },
});
</script>

<style scoped></style>
